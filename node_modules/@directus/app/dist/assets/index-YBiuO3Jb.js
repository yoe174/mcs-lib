import{p as De,T as Ye,a as Je,o as Ke}from"./runtime-dom.esm-bundler-D61lAmyL.js";import{u as ke,p as Ee,q as Qe,s as Ue,t as Xe,v as et,w as tt,_ as nt,S as at,x as Be,y as R,N as ot,z as st,A as fe,B as lt,C as it,D as Fe,E as rt,F as ct,G as ut,H as Le,I as dt,J as vt,K as mt,L as _t,M as ft,V as Ie,O as pt,P as ht,Q as bt,R as gt}from"./index.B0QQ3QBc.entry.js";import{u as yt,m as wt,a as kt,b as xt,c as St}from"./index-CN1dn6kN.js";import{storeToRefs as xe}from"./pinia.DeEyhdoI.entry.js";import{useI18n as Q}from"./vue-i18n.DulgMnVJ.entry.js";import{useRouter as Oe}from"./vue-router.rbVd-2ci.entry.js";import{w as z,ba as k,aI as K,j as x,an as r,ao as pe,k as $,af as c,aN as s,m as D,bk as l,F as oe,t as W,bq as M,u as a,l as L,al as se,bn as P,n as C,aP as J,b2 as Pe,bh as Vt,ap as $t,am as Y,a1 as Nt,a2 as Mt,r as Ct,bo as Wt,M as Dt,ah as Bt}from"./runtime-core.esm-bundler-C9cKm0JW.js";const It={key:0,class:"item-count"},Tt={key:1,class:"content"},Et={key:1,class:"notifications-block"},Ut=["onClick"],Ft={key:0,class:"message"},Lt=z({__name:"notifications-drawer",setup(t){const{t:e,n:o}=Q(),m=ke(),i=Ee(),S=Qe(),p=Ue(),V=Oe(),d=k(null),f=k([]),b=k(!1),g=k(["inbox"]),w=k([]),y=k(1),I=k(25),h=k(null),T=k(null),F=k(null),{notificationsDrawerOpen:B}=xe(m);K(g,(n,u)=>{n[0]!==u[0]&&(f.value=[])}),K(B,n=>{d.value=n?"directus_notifications":null});const O=x(()=>({_and:[{recipient:{_eq:i.currentUser.id}},{status:{_eq:g.value[0]}}]})),{items:X,loading:ee,totalPages:j,totalCount:te,itemCount:ne,getItems:le,getItemCount:he,getTotalCount:Z}=yt(d,{filter:x(()=>wt(T.value,O.value)),filterSystem:O,fields:k(["id","subject","message","collection","item","timestamp"]),sort:k(["-timestamp"]),search:h,limit:I,page:y}),E=x(()=>X.value.map(n=>{let u;return n.collection?S.getCollection(n.collection)?.meta?.singleton||!n.item?u=Xe(n.collection):u=et(n.collection,n.item):String(n.item).startsWith("/")&&(u=String(n.item)),{...n,to:u}})),ie=x(()=>{if(!(!te.value||!ne.value))return tt({currentItems:ne.value,currentPage:y.value,perPage:I.value,totalItems:te.value,isFiltered:!!T.value,i18n:{t:e,n:o}})}),be=x(()=>f.value.length>0&&f.value.length<E.value.length),q=x(()=>f.value.length===E.value.length&&E.value.length>0);async function U(){await le(),await Z(),await he()}async function re(){q.value?f.value=[]:f.value=E.value.map(n=>n.id)}function ge(n){f.value.includes(n)?f.value.splice(f.value.indexOf(n),1):f.value.push(n)}function ce(n){w.value.includes(n)?w.value.splice(w.value.indexOf(n),1):w.value.push(n)}async function ae(){f.value.length!==0&&(await Be.patch("/notifications",{keys:f.value,data:{status:g.value[0]==="inbox"?"archived":"inbox"}}),await U(),await p.refreshUnreadCount(),f.value=[])}async function ue(){try{await Be.delete("/notifications",{data:{keys:f.value}}),await U(),await p.refreshUnreadCount()}finally{b.value=!1,f.value=[]}}function de(n){V.push(n),B.value=!1}function v(){T.value=null,h.value=null}return(n,u)=>{const A=r("v-icon"),H=r("v-button"),N=r("v-card-title"),ve=r("v-card-actions"),ye=r("v-card"),je=r("v-dialog"),Se=r("v-list-item-icon"),Ve=r("v-list-item-content"),$e=r("v-tab"),Ae=r("v-tabs"),Ne=r("v-info"),Re=r("v-skeleton-loader"),Me=r("v-list"),Ce=r("v-checkbox"),ze=r("v-divider"),We=r("v-text-overflow"),He=r("v-list-item"),Ge=r("v-pagination"),Ze=r("v-drawer"),we=pe("tooltip"),qe=pe("md");return c(),$(Ze,{modelValue:l(B),"onUpdate:modelValue":u[8]||(u[8]=_=>Pe(B)?B.value=_:null),icon:"notifications",title:l(e)("notifications"),"sidebar-label":l(e)("folders"),onCancel:u[9]||(u[9]=_=>B.value=!1),onApply:ae},{"actions:prepend":s(()=>[a(Ye,{name:"fade"},{default:s(()=>[ie.value?(c(),D("span",It,M(ie.value),1)):L("",!0)]),_:1})]),actions:s(()=>[a(at,{modelValue:h.value,"onUpdate:modelValue":u[0]||(u[0]=_=>h.value=_),filter:T.value,"onUpdate:filter":u[1]||(u[1]=_=>T.value=_),collection:"directus_notifications"},null,8,["modelValue","filter"]),a(je,{modelValue:b.value,"onUpdate:modelValue":u[3]||(u[3]=_=>b.value=_),disabled:f.value.length===0,onEsc:u[4]||(u[4]=_=>b.value=!1),onApply:ue},{activator:s(({on:_})=>[J((c(),$(H,{rounded:"",icon:"",class:"action-delete",secondary:"",disabled:f.value.length===0,onClick:_},{default:s(()=>[a(A,{name:"delete",outline:""})]),_:1},8,["disabled","onClick"])),[[we,l(e)("delete_label"),void 0,{bottom:!0}]])]),default:s(()=>[a(ye,null,{default:s(()=>[a(N,null,{default:s(()=>[W(M(l(e)("delete_are_you_sure")),1)]),_:1}),a(ve,null,{default:s(()=>[a(H,{secondary:"",onClick:u[2]||(u[2]=_=>b.value=!1)},{default:s(()=>[W(M(l(e)("cancel")),1)]),_:1}),a(H,{kind:"danger",onClick:ue},{default:s(()=>[W(M(l(e)("delete_label")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),J((c(),$(H,{icon:"",rounded:"",disabled:f.value.length===0,secondary:"",onClick:ae},{default:s(()=>[a(A,{name:g.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[we,g.value[0]==="inbox"?l(e)("archive"):l(e)("unarchive"),void 0,{bottom:!0}]])]),sidebar:s(()=>[a(Ae,{modelValue:g.value,"onUpdate:modelValue":u[5]||(u[5]=_=>g.value=_),vertical:""},{default:s(()=>[a($e,{value:"inbox"},{default:s(()=>[a(Se,null,{default:s(()=>[a(A,{name:"inbox"})]),_:1}),a(Ve,null,{default:s(()=>[W(M(l(e)("inbox")),1)]),_:1})]),_:1}),a($e,{value:"archived"},{default:s(()=>[a(Se,null,{default:s(()=>[a(A,{name:"archive"})]),_:1}),a(Ve,null,{default:s(()=>[W(M(l(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:s(()=>[!l(ee)&&!l(ne)?(c(),D(oe,{key:0},[T.value||h.value?(c(),$(Ne,{key:0,title:l(e)("no_results"),icon:"search",center:""},{append:s(()=>[a(H,{onClick:v},{default:s(()=>[W(M(l(e)("clear_filters")),1)]),_:1})]),default:s(()=>[W(M(l(e)("no_results_copy"))+" ",1)]),_:1},8,["title"])):(c(),$(Ne,{key:1,icon:"notifications",title:l(e)("no_notifications"),center:""},{default:s(()=>[W(M(l(e)("no_notifications_copy")),1)]),_:1},8,["title"]))],64)):(c(),D("div",Tt,[l(ee)?(c(),$(Me,{key:0,class:"notifications"},{default:s(()=>[(c(),D(oe,null,se(10,_=>a(Re,{key:_,class:P({dense:l(j)>1})},null,8,["class"])),64))]),_:1})):(c(),D("div",Et,[a(Ce,{class:P(["select-all",{dense:l(j)>1}]),label:q.value?l(e)("deselect_all"):l(e)("select_all"),"model-value":q.value,indeterminate:be.value,"onUpdate:modelValue":re},null,8,["class","label","model-value","indeterminate"]),a(ze,{class:P({dense:l(j)>1})},null,8,["class"]),a(Me,{class:"notifications"},{default:s(()=>[(c(!0),D(oe,null,se(E.value,_=>(c(),$(He,{key:_.id,block:"",dense:l(j)>1,clickable:!!_.message,onMousedown:u[6]||(u[6]=De(({target:G})=>F.value=G,["left","self"])),onMouseup:De(({target:G})=>{G===F.value&&ce(_.id),F.value=null},["left","self"])},{default:s(()=>[C("div",{class:"header",onClick:G=>ce(_.id)},[a(Ce,{"model-value":f.value.includes(_.id),"onUpdate:modelValue":G=>ge(_.id)},null,8,["model-value","onUpdate:modelValue"]),a(We,{class:"title",highlight:h.value,text:_.subject},null,8,["highlight","text"]),a(nt,{value:_.timestamp,type:"timestamp",relative:""},{default:s(({datetime:G})=>[a(We,{class:"datetime",text:G},null,8,["text"])]),_:1},8,["value"]),_.to?J((c(),$(A,{key:0,clickable:"",name:"open_in_new",onClick:G=>de(_.to)},null,8,["onClick"])),[[we,l(e)("goto_collection_content")]]):L("",!0),_.message?(c(),$(A,{key:1,clickable:"",name:w.value.includes(_.id)?"expand_less":"expand_more"},null,8,["name"])):L("",!0)],8,Ut),w.value.includes(_.id)&&_.message?J((c(),D("div",Ft,null,512)),[[qe,_.message]]):L("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})])),l(j)>1?(c(),$(Ge,{key:2,modelValue:y.value,"onUpdate:modelValue":u[7]||(u[7]=_=>y.value=_),"total-visible":5,length:l(j)},null,8,["modelValue","length"])):L("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),Ot=R(Lt,[["__scopeId","data-v-3f4c93f4"]]),Pt={class:"icon"},jt={key:0,class:"title"},At=z({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(t){const e=ke(),{sidebarOpen:o}=Vt(e);return(m,i)=>{const S=r("v-icon");return c(),$($t(t.to?"router-link":"button"),{"aria-expanded":t.to?void 0:t.active,class:P(["sidebar-button",{active:t.active}]),onClick:i[0]||(i[0]=p=>m.$emit("click",p))},{default:s(()=>[C("div",Pt,[a(S,{name:t.icon},null,8,["name"])]),l(o)?(c(),D("div",jt,[Y(m.$slots,"default",{},void 0,!0)])):L("",!0)]),_:3},8,["aria-expanded","class"])}}}),Rt=R(At,[["__scopeId","data-v-b46f3879"]]),zt={class:"notifications-preview"},Ht={key:0,class:"inline"},Gt={class:"padding-box"},Zt=z({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t){const{t:e}=Q(),o=Ue(),{lastFour:m}=xe(o);return(i,S)=>{const p=r("router-link"),V=r("transition-expand"),d=pe("tooltip");return c(),D("div",zt,[J((c(),$(Rt,{active:t.modelValue,class:"toggle",icon:"pending_actions",onClick:S[0]||(S[0]=f=>i.$emit("update:modelValue",!t.modelValue))},{default:s(()=>[W(M(l(e)("activity_log")),1)]),_:1},8,["active"])),[[d,!t.sidebarOpen&&l(e)("activity_log"),void 0,{left:!0}]]),a(V,{tag:"div"},{default:s(()=>[t.modelValue?(c(),D("div",Ht,[C("div",Gt,[a(p,{class:P(["link",{"has-items":l(m).length>0}]),to:"/activity"},{default:s(()=>[W(M(l(e)("show_all_activity")),1)]),_:1},8,["class"]),a(Je,{tag:"div",name:"notification",class:"transition"},{default:s(()=>[(c(!0),D(oe,null,se(l(m),f=>(c(),$(ot,Nt({key:f.id},{ref_for:!0},f),null,16))),128))]),_:1})])])):L("",!0)]),_:1})])}}}),qt=R(Zt,[["__scopeId","data-v-e0cb683f"]]),Te=t=>Number.isFinite(t)?t:0;function Yt(t){return{days:Math.trunc(t/864e5),hours:Math.trunc(t/36e5%24),minutes:Math.trunc(t/6e4%60),seconds:Math.trunc(t/1e3%60),milliseconds:Math.trunc(t%1e3),microseconds:Math.trunc(Te(t*1e3)%1e3),nanoseconds:Math.trunc(Te(t*1e6)%1e3)}}function Jt(t){return{days:t/86400000n,hours:t/3600000n%24n,minutes:t/60000n%60n,seconds:t/1000n%60n,milliseconds:t%1000n,microseconds:0n,nanoseconds:0n}}function Kt(t){switch(typeof t){case"number":{if(Number.isFinite(t))return Yt(t);break}case"bigint":return Jt(t)}throw new TypeError("Expected a finite number or bigint")}const Qt=t=>t===0||t===0n,Xt=(t,e)=>e===1||e===1n?t:`${t}s`,en=1e-7,tn=24n*60n*60n*1000n;function me(t,e){const o=typeof t=="bigint";if(!o&&!Number.isFinite(t))throw new TypeError("Expected a finite number or bigint");e={...e};const m=t<0?"-":"";t=t<0?-t:t,e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let i=[];const S=(b,g)=>{const w=Math.floor(b*10**g+en);return(Math.round(w)/10**g).toFixed(g)},p=(b,g,w,y)=>{if(!((i.length===0||!e.colonNotation)&&Qt(b)&&!(e.colonNotation&&w==="m"))){if(y??=String(b),e.colonNotation){const I=y.includes(".")?y.split(".")[0].length:y.length,h=i.length>0?2:1;y="0".repeat(Math.max(0,h-I))+y}else y+=e.verbose?" "+Xt(g,b):w;i.push(y)}},V=Kt(t),d=BigInt(V.days);if(e.hideYearAndDays?p(BigInt(d)*24n+BigInt(V.hours),"hour","h"):(e.hideYear?p(d,"day","d"):(p(d/365n,"year","y"),p(d%365n,"day","d")),p(Number(V.hours),"hour","h")),p(Number(V.minutes),"minute","m"),!e.hideSeconds)if(e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&t<1e3&&!e.subSecondsAsDecimals){const b=Number(V.seconds),g=Number(V.milliseconds),w=Number(V.microseconds),y=Number(V.nanoseconds);if(p(b,"second","s"),e.formatSubMilliseconds)p(g,"millisecond","ms"),p(w,"microsecond","Âµs"),p(y,"nanosecond","ns");else{const I=g+w/1e3+y/1e6,h=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,T=I>=1?Math.round(I):Math.ceil(I),F=h?I.toFixed(h):T;p(Number.parseFloat(F),"millisecond","ms",F)}}else{const b=(o?Number(t%tn):t)/1e3%60,g=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,w=S(b,g),y=e.keepDecimalsOnWholeSeconds?w:w.replace(/\.0+$/,"");p(Number.parseFloat(y),"second","s",y)}if(i.length===0)return m+"0"+(e.verbose?" milliseconds":"ms");const f=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(i=i.slice(0,Math.max(e.unitCount,1))),m+i.join(f)}const nn={class:"latency-indicator"},an=z({__name:"latency-indicator",setup(t){const{t:e}=Q(),o=st(),m=x(()=>{const d=fe.sortBy(o.latency,["timestamp"]);return d[d.length-1]}),i=x(()=>{if(!o.latency||o.latency.length===0)return 0;const d=fe.sortBy(o.latency,["timestamp"]),f=d.slice(Math.max(d.length-5,0));let b=0;for(const{latency:g}of f)b+=g;return Math.round(b/f.length)}),S=x(()=>i.value<=250?4:i.value>250&&i.value<=500?3:i.value>500&&i.value<=750?2:1),p=x(()=>{switch(S.value){case 4:return`${e("connection_excellent")}
(${me(i.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${me(i.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${me(i.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${me(i.value)} ${e("latency")})`;default:return null}}),V=x(()=>{switch(S.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(d,f)=>{const b=r("v-progress-circular"),g=r("v-icon"),w=pe("tooltip");return J((c(),D("div",nn,[m.value?(c(),$(g,{key:1,name:V.value},null,8,["name"])):(c(),$(b,{key:0,indeterminate:""}))])),[[w,p.value,void 0,{bottom:!0,end:!0}]])}}}),on=R(an,[["__scopeId","data-v-93933dfa"]]),sn={class:"project-info"},ln={class:"name-container"},rn=z({__name:"project-info",setup(t){const e=lt(),o=x(()=>e.info?.project?.project_name),m=x(()=>e.info?.project?.project_descriptor);return(i,S)=>{const p=r("v-text-overflow");return c(),D("div",sn,[a(on),C("div",ln,[a(p,{class:"name",text:o.value,placement:"bottom"},null,8,["text"]),m.value?(c(),$(p,{key:0,class:"descriptor",text:m.value,placement:"bottom"},null,8,["text"])):L("",!0)])])}}}),cn=R(rn,[["__scopeId","data-v-b2d8fb55"]]),un=z({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(t){const e=t,o=it("sidebar-open-detail",[]),m=k(!1);return K(()=>e.sidebarOpen,async i=>{i===!1?o.value=[]:(m.value=!0,await Mt(),m.value=!1)}),(i,S)=>{const p=r("v-item-group");return c(),$(p,{modelValue:l(o),"onUpdate:modelValue":S[0]||(S[0]=V=>Pe(o)?o.value=V:null),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:m.value},{default:s(()=>[Y(i.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),dn=R(un,[["__scopeId","data-v-abc8855b"]]),vn={class:"inner"},mn={class:"warning"},_n={class:"sub"},fn=z({__name:"license-banner",setup(t){const e=Fe(),o=Le(["license-banner-dismissed"]),{t:m}=Q(),i=k([]),S=x(()=>!d.value.project_owner||!d.value.license||d.value.project_usage==="commercial"&&!d.value.org_name);async function p(){i.value=ut(d.value,f),!(i.value.length>0)&&(await e.setOwner(d.value),await e.hydrate())}async function V(){o.set("license-banner-dismissed","true",{expires:new Date(Date.now()+1e3*60*60*24*30)}),dt({title:m("bsl_banner.remind_next_login"),type:"info"})}const d=k(vt),f=rt(!1,d);return(b,g)=>{const w=r("v-icon"),y=r("v-card-title"),I=r("v-card-text"),h=r("v-button"),T=r("v-card-actions"),F=r("v-card"),B=r("v-dialog");return c(),$(B,null,{default:s(()=>[a(F,null,{default:s(()=>[C("div",vn,[a(y,null,{default:s(()=>[C("span",mn,[W(M(l(m)("bsl_banner.title"))+" ",1),a(w,{name:"warning",filled:""})])]),_:1}),a(I,null,{default:s(()=>[C("div",_n,M(l(m)("bsl_banner.license")),1),a(ct,{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=O=>d.value=O),errors:i.value,register:!1,"utm-location":"banner"},null,8,["modelValue","errors"])]),_:1}),a(T,null,{default:s(()=>[a(h,{secondary:"",onClick:V},{default:s(()=>[W(M(l(m)("bsl_banner.remind_later")),1)]),_:1}),a(h,{disabled:S.value,onClick:p},{default:s(()=>[W(M(l(m)("bsl_banner.set_owner")),1)]),_:1},8,["disabled"])]),_:1})])]),_:1})]),_:1})}}}),pn=R(fn,[["__scopeId","data-v-185c7b3a"]]),hn=z({__name:"skip-menu",props:{section:{}},setup(t){const{t:e}=Q(),o=[{key:"nav",hash:"#navigation",text:e("skip_link_nav")},{key:"moduleNav",hash:"#module-navigation",text:e("skip_link_module_nav")},{key:"main",hash:"#main-content",text:e("skip_link_main")},{key:"sidebar",hash:"#sidebar",text:e("skip_link_sidebar")}],m=x(()=>o.filter(i=>i.key!==t.section));return(i,S)=>{const p=r("v-list-item"),V=r("v-list");return m.value.length?(c(),$(V,{key:0,class:P(["skip-menu",{right:t.section==="sidebar",center:t.section==="main"}])},{default:s(()=>[(c(!0),D(oe,null,se(m.value,d=>(c(),$(p,{key:d,href:i.$router.resolve(d.hash).href,target:"_self"},{default:s(()=>[W(M(d.text),1)]),_:2},1032,["href"]))),128))]),_:1},8,["class"])):L("",!0)}}}),_e=R(hn,[["__scopeId","data-v-a58e5def"]]),bn={class:"module-nav alt-colors"},gn={id:"module-navigation",class:"module-nav-content"},yn={class:"content-wrapper"},wn={class:"flex-container"},kn=z({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(t,{emit:e}){const o={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},m=t,i=e,{t:S}=Q(),p=Oe(),V=x(()=>m.title??null),d=kt(m,"splitView",i),f=Le(["license-banner-dismissed"]),b=k(),g=k(),w=k();let y;const I=()=>{clearTimeout(y),b.value?.classList.remove("hide-overflow-x")};K(d,()=>{if(!b.value||!g.value)return;b.value.classList.add("hide-overflow-x","hide-overflow-y"),y=setTimeout(I,1500);let v,n;const u=()=>{clearTimeout(v),n?.(),b.value?.classList.remove("hide-overflow-y")};v=setTimeout(u,1500),n=gt(g.value,"transitionend",u)});const{width:h}=mt(),{width:T}=xt(w),F=x(()=>{if(!d.value)return!0;let v;return h.value>=1260?v=h.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-T.value:h.value>=960?v=h.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-o.collapsedSidebarWidth:v=h.value-o.minContentWidth,v>=m.splitViewMinWidth}),{data:B}=_t("module-width",{}),O=k(ae(B.value?.nav,o.minModuleNavWidth));K(O,fe.debounce(v=>{B.value={...B.value??{},nav:v}},300));const X=k(ae(B.value?.main,o.minContentWidth));K(X,fe.debounce(v=>{B.value={...B.value??{},main:v}},300));const ee=k(!1),j=x(()=>{const v=d.value?m.splitViewMinWidth:0,n=F.value?o.minContentWidth+v:o.minContentWidth;let u;return h.value>=1260?u=h.value-o.moduleBarWidth-n-T.value:h.value>=960?u=h.value-o.moduleBarWidth-n-o.collapsedSidebarWidth:u=h.value-o.moduleBarWidth+o.overlaySpace,Math.max(u,o.minModuleNavWidth)}),te=x(()=>{const v=d.value?m.splitViewMinWidth:0;let n;return h.value>=1260?n=h.value-o.moduleBarWidth-O.value-v-T.value:h.value>=960?n=h.value-o.moduleBarWidth-O.value-v-o.collapsedSidebarWidth:n=h.value-v,Math.max(n,o.minContentWidth)}),ne=x(()=>({snapZones:[{width:40,snapPos:o.minModuleNavWidth,direction:"left"},{width:40,snapPos:j.value,direction:"right"}]})),le=k(!1),he=x(()=>({snapZones:[{width:40,snapPos:o.minContentWidth,direction:"left"},{width:40,snapPos:te.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:ee.value})),Z=k(!1),E=Ee(),ie=ke(),be=x(()=>E.currentUser?E.currentUser?.app_access||!1:!0),q=k(!1),{sidebarOpen:U,fullScreen:re}=xe(ie),ge=x(()=>E.currentUser&&"appearance"in E.currentUser?E.currentUser.appearance:"auto");Bt("main-element",b),p.afterEach((v,n)=>{!v.meta.isFloatingView&&!n.meta.isFloatingView&&b.value?.scrollTo({top:0}),re.value=!1}),St({title:V});function ce(v){v.target&&v.target.classList.contains("close")===!1&&(U.value=!0)}function ae(v,n){return v&&!Number.isNaN(v)?Number(v):n}const ue=Fe(),de=x(()=>E.isAdmin&&!ue.settings?.project_owner&&!f.get("license-banner-dismissed"));return(v,n)=>{const u=r("v-button"),A=r("v-info"),H=r("v-overlay");return be.value===!1?(c(),$(A,{key:0,center:"",title:l(S)("no_app_access"),type:"danger",icon:"block"},{append:s(()=>[a(u,{to:"/logout"},{default:s(()=>[W(M(l(S)("switch_user")),1)]),_:1})]),default:s(()=>[W(M(l(S)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(c(),D("div",{key:1,class:P(["private-view",{appearance:ge.value,"full-screen":l(re),splitView:t.splitView}])},[a(_e,{section:"nav"}),C("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:P({"is-open":Z.value,"has-shadow":t.sidebarShadow})},[a(ft),a(Ie,{width:O.value,"onUpdate:width":n[0]||(n[0]=N=>O.value=N),"min-width":o.minModuleNavWidth,"max-width":j.value,options:ne.value,onDragging:n[1]||(n[1]=N=>ee.value=N),onTransitionEnd:I},{default:s(()=>[C("div",bn,[a(_e,{section:"moduleNav"}),a(cn),C("div",gn,[Y(v.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),a(_e,{section:"main"}),C("div",{id:"main-content",ref_key:"contentEl",ref:b,class:"content"},[a(pt,{ref_key:"headerBarEl",ref:g,small:t.smallHeader||t.splitView,shadow:t.headerShadow||t.splitView,"show-sidebar-toggle":"",title:t.title,"onToggle:sidebar":n[2]||(n[2]=N=>U.value=!l(U)),onPrimary:n[3]||(n[3]=N=>Z.value=!Z.value)},Ct({_:2},[se(v.$slots,(N,ve)=>({name:ve,fn:s(ye=>[Y(v.$slots,ve,Wt(Dt(ye)),void 0,!0)])}))]),1032,["small","shadow","title"]),C("div",yn,[a(Ie,{width:X.value,"onUpdate:width":n[4]||(n[4]=N=>X.value=N),"min-width":o.minContentWidth,"max-width":te.value,disabled:!l(d),options:he.value,onDragging:n[5]||(n[5]=N=>le.value=N)},{default:s(()=>[J(C("main",null,[Y(v.$slots,"default",{},void 0,!0)],512),[[Ke,F.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),t.splitView?(c(),D("div",{key:0,id:"split-content",class:P({"is-dragging":le.value})},[Y(v.$slots,"splitView",{},void 0,!0)],2)):L("",!0)])],512),a(_e,{section:"sidebar"}),C("aside",{id:"sidebar",ref_key:"sidebarEl",ref:w,role:"contentinfo",class:P(["alt-colors",{"is-open":l(U),"has-shadow":t.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:ce},[C("div",wn,[a(dn,{"sidebar-open":l(U)},{default:s(()=>[Y(v.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),n[10]||(n[10]=C("div",{class:"spacer"},null,-1)),a(qt,{modelValue:q.value,"onUpdate:modelValue":n[6]||(n[6]=N=>q.value=N),"sidebar-open":l(U)},null,8,["modelValue","sidebar-open"])])],2),a(H,{class:"nav-overlay",active:Z.value,onClick:n[7]||(n[7]=N=>Z.value=!1)},null,8,["active"]),a(H,{class:"sidebar-overlay",active:l(U),onClick:n[8]||(n[8]=N=>U.value=!1)},null,8,["active"]),a(Ot),q.value===!1?(c(),$(ht,{key:0,"sidebar-open":l(U)},null,8,["sidebar-open"])):L("",!0),a(bt),a(pn,{modelValue:de.value,"onUpdate:modelValue":n[9]||(n[9]=N=>de.value=N)},null,8,["modelValue"])],2))}}}),Wn=R(kn,[["__scopeId","data-v-c0181c0b"]]);export{Wn as PrivateView,Wn as default};
